server:
  port: 8080

spring:
  profiles:
    active: dev  # dev 프로필 활성화 (MockTTSServiceImpl 사용)

  # 데이터베이스 설정
  datasource:
    url: jdbc:postgresql://localhost:5432/moretale
    username: postgres
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: update
    defer-datasource-initialization: true
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # SQL 초기화 설정
  sql:
    init:
      mode: always
      encoding: UTF-8

  # OAuth2 보안 설정
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - email
              - profile
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub

  # 비동기 처리 설정
  task:
    execution:
      pool:
        core-size: 2
        max-size: 5
        queue-capacity: 100

# JWT 설정
jwt:
  secret: ${JWT_SECRET}
  expiration: 86400000

# 파일 업로드 설정
file:
  upload:
    base-path: ${user.home}/moretale/uploads
    base-url: http://localhost:8080/uploads

# TTS 저장 경로
tts:
  storage:
    path: tts/audio

# MoreTale AI 서비스 연동 설정
moretale:
  ai:
    story-generation-url: ${STORY_GENERATION_URL:http://localhost:8081}
    image-generation-url: ${IMAGE_GENERATION_URL:http://localhost:8082}
  tts:
    url: ${TTS_URL:http://localhost:8083}
  quiz:
    auto-generation-url: ${QUIZ_GENERATION_URL:http://localhost:8084}

# Google Cloud 설정 (운영 환경용)
google:
  cloud:
    storage:
      bucket: moretale-audio-bucket
      base-url: https://storage.googleapis.com
    credentials:
      location: classpath:gcp-service-account.json
